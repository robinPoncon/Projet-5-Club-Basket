{% extends "base.html.twig" %}

{% block title %} Administration des utilisateurs {% endblock %}

{% block body %}
    {% include "security/admin/compte.nav.html.twig" %}

    <h1>Gestion des utilisateurs</h1>

    <h2>Liste des utilisateurs</h2>

    <table class="table table-hover blocUser">
        <thead>
        <th scope="col">Nom</th>
        <th scope="col">Email</th>
        <th scope="col">Rôles</th>
        <th scope="col">Fonction club</th>
        <th colspan="2">Actions</th>
        </thead>
        <tbody>
        {# On boucle sur les utilisateurs #}
        {% for user in users %}
            <tr>
                <td>{{ user.username }}</td>
                <td>{{ user.email }}</td>
                <td>
                    {# On boucle sur les rôles #}
                    {% for role in user.roles %}
                        {% if role == "ROLE_EDITOR" %}
                            Editeur <br>
                        {% elseif role == "ROLE_ADMIN" %}
                            Administrateur <br>
                            {% else %}
                            Utilisateur <br>
                        {% endif %}
                    {% endfor %}
                </td>
                <td>Membre du bureau</td>
                <td colspan="2">
                    <a href="{{ path("modifierUtilisateur", {'slug': user.slug}) }}">Modifier</a><br>
                    <a href="{{ path("supprimerUtilisateur", {"id": user.id}) }}">Supprimer</a>
                </td>
            </tr>
        {% else %}
            <p>Aucun utilisateur inscrit</p>
        {% endfor %}
        </tbody>
    </table>

{% endblock %}