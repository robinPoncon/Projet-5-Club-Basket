{% extends "base.html.twig" %}

{% block title %} Modification d'un article {% endblock %}

{% block body %}
    {% include "security/compte.nav.html.twig" %}

    <h1>Modifier un article</h1>

    <div class="editArticleForm">
        {{ form_start(formArticle) }}
            <div class="divForm">
                <div class="errorForm">
                    {{ form_errors(formArticle.title) }}
                </div>
                <div class="d-flex">
                    {{ form_label(formArticle.title) }}
                    {{ form_widget(formArticle.title) }}
                </div>
            </div>
            <div class="divForm">
                <div class="errorForm">
                    {{ form_errors(formArticle.content) }}
                </div>
                <div class="d-flex">
                    {{ form_label(formArticle.content) }}
                    {{ form_widget(formArticle.content) }}
                </div>
            </div>
            <div class="divForm">
                <div class="errorForm">
                    {{ form_errors(formArticle.category) }}
                </div>
                <div class="d-flex">
                    {{ form_label(formArticle.category) }}
                    {{ form_widget(formArticle.category) }}
                </div>
            </div>
            <div class="divForm">
                <div class="errorForm">
                    {{ form_errors(formArticle.prioritaire) }}
                </div>
                <div class="d-flex">
                    {{ form_label(formArticle.prioritaire) }}
                    {{ form_widget(formArticle.prioritaire) }}
                </div>
            </div>

            <div class="d-flex justify-content-center blocPhotoEdit">
                {% for photoArticle in photoArticles %}
                    <div class="d-flex flex-column divPhoto">
                        <img src="{{ asset(vich_uploader_asset(photoArticle, "imageFile") | imagine_filter("equipeModif")) }}"
                             alt="photo de l'Ã©quipe de basket">
                        {% if photoArticle.getImportant == 0 %}
                            <a href="{{ path("mettreEnAvantPhotoArticle", {"id": photoArticle.id}) }}">Mettre en avant</a>
                        {% else %}
                            <p>Image mise en avant</p>
                        {% endif %}
                        <a href="{{ path("supprimerPhotoArticle", {"id": photoArticle.id}) }}">Supprimer</a>
                    </div>
                {% endfor %}
            </div>


            <ul id="photo-fields-list" class="photoDiv"
                data-prototype="{{ form_widget(formArticle.photoArticles.vars.prototype)|e }}"
                data-widget-tags="{{ '<li></li>'|e }}"
                data-widget-counter="{{ formArticle.photoArticles|length }}">

            </ul>

            <button type="button"
                    class="add-another-collection-widget"
                    data-list-selector="#photo-fields-list">Ajouter une autre photo</button>

            <button class="form-control submit" type="submit">Modifier</button>
        {{ form_end(formArticle) }}
    </div>

{% endblock %}